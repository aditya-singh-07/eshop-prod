<p-breadcrumb [model]="items" [home]="product"></p-breadcrumb>
<p-confirmDialog #cd [style]="{width: '50vw'}">
    <ng-template pTemplate="header" icon="pi pi-exclamation-triangle">
        <h3>Confirmation</h3>
    </ng-template>
    <ng-template pTemplate="footer">
        <button type="button" pButton icon="pi pi-times" label="No" (click)="cd.reject()"></button>
        <button type="button" pButton icon="pi pi-check" label="Yes" (click)="cd.accept()"></button>
    </ng-template>
</p-confirmDialog>
<p-toast></p-toast>

<div class="card p-mt-2">
    <p-card header="Product" subheader="You can manage Products" [style]="{ 'margin-right': 'auto','margin-top': '2%' }">   
        <div class="p-grid">
            <div class="p-col-12 p-md-* p-lg-*">
                <button
                    pButton
                    type="button"
                    label="Create Product"
                    icon="pi pi-plus"
                    class="p-button-outlined p-button-rounded"
                    [style]="{'float':'right'}"
                    [routerLink]="['/Addproduct']"
                ></button>
            </div>
        </div>
    <div class="p-grid">
        
        <div class="p-col-12 p-md-* p-lg-*">
            <p-table
                #dt
                [value]="Product"
                [rows]="3"
                [paginator]="true"
                [globalFilterFields]="['name','category','price']"
                [rowHover]="true"
                dataKey="id"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [showCurrentPageReport]="true"
            >
                <ng-template pTemplate="caption">
                    <div class="p-d-flex p-ai-center p-jc-between">
                        <h5 class="p-m-2">Manage Products</h5>
                        <span class="p-input-icon-left">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text" placeholder="Search..." />
                        </span>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
                        <!-- <th pSortableColumn="description">
                            Description<p-sortIcon field="description"></p-sortIcon>
                        </th>
                        <th pSortableColumn="descriptiondetail">
                            Description Details <p-sortIcon field="descriptiondetail"></p-sortIcon>
                        </th> -->
                        <th pSortableColumn="image">
                            Image <p-sortIcon field="image"></p-sortIcon>
                        </th>
                        <th pSortableColumn="category">
                            Category <p-sortIcon field="category"></p-sortIcon>
                        </th>
                        <th pSortableColumn="price">
                            Price <p-sortIcon field="price"></p-sortIcon>
                        </th>
  
                        <th pSortableColumn="productStock">
                            Stock <p-sortIcon field="productStock"></p-sortIcon>
                        </th>
                        <th pSortableColumn="rating">
                            Rating <p-sortIcon field="rating"></p-sortIcon>
                        </th>
                        <!-- <th pSortableColumn="numReview">
                            NumReview <p-sortIcon field="numReview"></p-sortIcon>
                        </th> -->
                        <!-- <th pSortableColumn="isFeatured">
                            Featured <p-sortIcon field="isFeatured"></p-sortIcon>
                        </th> -->
                        <th>Action</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-product>
                    <tr>
                        <td>{{ product.name }}</td>
                        <!-- <td>{{ product.description }}</td>
                        <td>{{ product.descriptionDetails }}</td> -->
                        <td>
                            <img
                                [src]="product.image"
                                [alt]="product.name"
                                width="100"
                                class="p-shadow-4"
                            />
                        </td>
                        <td>{{ product.category.name }}</td>
                        <td>{{ product.price | currency: 'INR' }}</td>

                        <td>{{ product.productStock }}</td>
                        <td>
                            <p-rating
                                [ngModel]="product.rating"
                                [readonly]="true"
                                [cancel]="false"
                            ></p-rating>
                        </td>
                        <!-- <td>{{ product.numReview }}</td> -->
                        <!-- <td>{{ product.isFeatured }}</td> -->

                        <td>
                            <button
                                pButton
                                pRipple
                                icon="pi pi-pencil"
                                [routerLink]="['/products', product.id]"
                                class="p-button-rounded p-button-success p-mr-2"
                            ></button>
                            <button
                                pButton
                                pRipple
                                icon="pi pi-trash"
                                (click)="deleteProduct(product.id)"
                                class="p-button-rounded p-button-warning"
                            ></button>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="summary">
                    <div class="p-d-flex p-ai-center p-jc-between">
                        In total there are {{Product ? Product.length : 0 }} products.
                    </div>
                </ng-template>
            </p-table>
        </div>
    </div>
    </p-card>
</div>
